<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <script type="module">
            import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.1/firebase-app.js";
            import { getAuth, isSignInWithEmailLink, signInWithEmailLink } from "https://www.gstatic.com/firebasejs/10.8.1/firebase-auth.js";
            const firebaseConfig = {
                apiKey: "AIzaSyBBT799FTeNCPGm3-HNzAUg2I1XWf4BAas",
                authDomain: "mygamehub-d13d8.firebaseapp.com",
                projectId: "mygamehub-d13d8",
                storageBucket: "mygamehub-d13d8.appspot.com",
                messagingSenderId: "339025715622",
                appId: "1:339025715622:web:f42547030db409a4b16f67"
            };
            const app = initializeApp(firebaseConfig);
            const auth = getAuth(app);
            function sendEmailLink() {
                alert("Recieved click")
                let email = document.getElementById('email').value;
                auth.sendSignInLinkToEmail(email, {
                    url: window.location.href,
                    handleCodeInApp: true
                }).then(() => {
                        window.localStorage.setItem('emailForSignIn', email);
                        localStorage.setItem('emailForSignIn', email);
                        alert('An email has been sent to ' + email + '. Please check your email to sign in.');
                }).catch((error) => {
                        console.error(error);
                        document.getElementById('error').innerText = error;
                        alert('An error occurred.');
                });
            };
            document.getElementById('send-email-link').addEventListener('click', sendEmailLink);
        </script>
        <link rel="stylesheet" type="text/css" href="assets/styles.css">
        <title>MyGameHub - Login</title>
        <script src="assets/script.js"></script>
        <style>
            .login-form {
                background-color: white;
                padding: 20px;
                border-radius: 5px;
                box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
                justify-content: center;
                align-items: center;
            }
            .login-form input {
                width: 100%;
                padding: 10px;
                margin-bottom: 10px;
                border-radius: 5px;
                border: 1px solid #ddd;
            }
            .login-form button {
                width: 100%;
                padding: 10px;
                background-color: #007bff;
                color: white;
                border: none;
                border-radius: 5px;
                cursor: pointer;
            }
            .login-form button:hover {
                background-color: #0056b3;
            }
        </style>
    </head>
    <body>
        <div class="navbar">
            <a href="/"><img src="assets/logo-256.jpg"></a>
            <div class="right-navbar">
                <a href="developers">Developers</a>
                <a href="documentation">Documentation</a>
                <a href="settings">Settings</a>
                <a href="login">Login</a>
            </div>
        </div>
        <div class="content-container">
            <container>
                <form class="login-form" onsubmit="event.preventDefault();">
                    <h2>Login</h2>
                    <input type="email" id="email" placeholder="Email">
                    <button id="send-email-link">Send Email Link</button>
                    <p id="error"></p>
                </form>
            </container>
        </div>
    </body>
</html>